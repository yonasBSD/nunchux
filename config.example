# Nunchux Configuration
#
# Copy to: ~/.config/nunchux/config
# Fallback: ~/.nunchuxrc
#
# This file is sourced as bash, so you can use variables and logic.

# ─────────────────────────────────────────────────────────────────────────────
# Icons
# ─────────────────────────────────────────────────────────────────────────────
ICON_RUNNING="●"
ICON_STOPPED="○"

# ─────────────────────────────────────────────────────────────────────────────
# Default popup dimensions (used when app doesn't specify its own)
# ─────────────────────────────────────────────────────────────────────────────
APP_POPUP_WIDTH="90%"
APP_POPUP_HEIGHT="90%"

# ─────────────────────────────────────────────────────────────────────────────
# Justfile integration
# ─────────────────────────────────────────────────────────────────────────────
# Automatically discover and show just recipes from justfiles
# JUST_ENABLED=false

# ─────────────────────────────────────────────────────────────────────────────
# FZF styling
# ─────────────────────────────────────────────────────────────────────────────
FZF_PROMPT=" "
FZF_POINTER="▶"
FZF_BORDER="rounded"
FZF_BORDER_LABEL=" nunchux "
FZF_COLORS="fg+:white:bold,bg+:-1,hl:cyan,hl+:cyan:bold,pointer:cyan,marker:green,header:gray,border:gray"

# ─────────────────────────────────────────────────────────────────────────────
# Apps
# ─────────────────────────────────────────────────────────────────────────────
# Format: chuck name command description [width] [height]
#
# - name:        Window name (keep short, no spaces)
# - command:     Command to run (quote if it contains spaces)
# - description: Shown in the launcher menu
# - width:       Optional popup width (number = %, or "80%" explicitly)
# - height:      Optional popup height

# ─────────────────────────────────────────────────────────────────────────────
# Dynamic Status
# ─────────────────────────────────────────────────────────────────────────────
# Format: chuck_status name "command"
#
# Runs command when building the menu and appends output to description.
# Useful for showing counts, status indicators, etc.

# System - show load, ram, and disk usage
chuck btop       "btop"         ""
chuck_status btop "load=\$(cut -d' ' -f1 /proc/loadavg); ram=\$(awk '/MemAvailable/{printf \"%.0f\", \$2/1024/1024}' /proc/meminfo); disk=\$(df /home --output=avail 2>/dev/null | tail -1 | awk '{printf \"%.0f\", \$1/1024/1024}'); echo \"load: \$load | ram: \${ram}GB free | /home: \${disk}GB free\""
chuck htop       "htop"         "Process viewer"

# Git - show number of changed files
chuck git        "lazygit"      "Git"
chuck_status git "n=\$(git status -s 2>/dev/null | wc -l | tr -d ' '); [[ \$n -gt 0 ]] && echo \"(\$n changed)\""

# Docker - show running container count
chuck docker     "lazydocker"   "Docker"
chuck_status docker "n=\$(docker ps -q 2>/dev/null | wc -l | tr -d ' '); [[ \$n -gt 0 ]] && echo \"(\$n running)\""

# Kubernetes (uncomment if you use k9s)
# chuck k9s      "k9s"          "Kubernetes"
# chuck_status k9s "ctx=\$(kubectl config current-context 2>/dev/null); [[ -n \"\$ctx\" ]] && echo \"(\$ctx)\""

# File managers
# Note: yazi doesn't work directly in tmux popups due to terminal passthrough issues
# (see https://github.com/sxyazi/yazi/issues/2308). Workaround: wrap in nvim terminal.
# chuck yazi     "nvim -c 'terminal yazi' -c 'startinsert' -c 'autocmd TermClose * qa!'"         "File manager"
# chuck ranger   "ranger"       "File manager"

# Editors/Notes (with custom dimensions and status)
# chuck notes    "nvim ~/notes"    ""     80 60
# chuck_status notes "mins=\$(( (\$(date +%s) - \$(stat -c %Y ~/notes 2>/dev/null || echo 0)) / 60 )); [[ \$mins -lt 60 ]] && echo \"(\${mins}m ago)\" || echo \"(\$((\$mins/60))h ago)\""
# chuck todos    "nvim ~/todos.md" ""       70 50
# chuck_status todos "n=\$(wc -l < ~/todos.md 2>/dev/null || echo 0); echo \"(\$n lines)\""

# Databases
# chuck pgcli    "pgcli"        "PostgreSQL client"
# chuck mycli    "mycli"        "MySQL client"

# Network
# chuck bandwhich "sudo bandwhich" "Network monitor"

# Logs
# chuck lnav     "lnav"         "Log viewer"        95 90
